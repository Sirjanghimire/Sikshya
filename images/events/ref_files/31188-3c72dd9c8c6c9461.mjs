"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["31188"],{324510:function(e,a,l){var n,i,t,r,s,d,u,o,c,g,m,p;l.r(a),l.d(a,{default:()=>k});let y=(n=[{defaultValue:null,kind:"LocalArgument",name:"pinId"}],i=[{kind:"Variable",name:"pin",variableName:"pinId"}],t={alias:null,args:null,kind:"ScalarField",name:"isEligibleForPdp",storageKey:null},r={alias:null,args:null,concreteType:"AggregateRatingMetadata",kind:"LinkedField",name:"aggregateRating",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"ratingValue",storageKey:null}],storageKey:null},u={alias:"image236x",args:[{kind:"Literal",name:"spec",value:"236x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d=[s={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:'additionalImagesPerSpec(spec:"236x")'},m={alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},{fragment:{argumentDefinitions:n,kind:"Fragment",metadata:null,name:"CloseupPageDesktopQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[t,{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[r],storageKey:null},{args:null,kind:"FragmentSpread",name:"CloseupPageDesktop_pin"}],storageKey:null},s],type:"V3GetPin",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:n,kind:"Operation",name:"CloseupPageDesktopQuery",selections:[{alias:null,args:i,concreteType:null,kind:"LinkedField",name:"v3GetPinQuery",plural:!1,selections:[s,{kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"Pin",kind:"LinkedField",name:"data",plural:!1,selections:[t,{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[r,{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"itemId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"itemSetId",storageKey:null},u,o={alias:"image474x",args:[{kind:"Literal",name:"spec",value:"474x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"474x")'},c={alias:"image564x",args:[{kind:"Literal",name:"spec",value:"564x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"564x")'},g={alias:"image736x",args:[{kind:"Literal",name:"spec",value:"736x"}],concreteType:"AdditionalImagesPerSpec",kind:"LinkedField",name:"additionalImagesPerSpec",plural:!0,selections:d,storageKey:'additionalImagesPerSpec(spec:"736x")'}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isOosProduct",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isStaleProduct",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,concreteType:"RichPinProductMetadata",kind:"LinkedField",name:"products",plural:!0,selections:[{alias:null,args:null,concreteType:"Brand",kind:"LinkedField",name:"brand",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"signature",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ShippingInfo",kind:"LinkedField",name:"shippingInfo",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"freeShippingPrice",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"freeShippingValue",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariantSet",kind:"LinkedField",name:"variantSet",plural:!1,selections:[{alias:null,args:null,concreteType:"DimensionMetadata",kind:"LinkedField",name:"dimensionMetadata",plural:!0,selections:[m,{alias:null,args:null,kind:"ScalarField",name:"values",storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"ProductVariant",kind:"LinkedField",name:"variants",plural:!0,selections:d,storageKey:null}],storageKey:null},u,o,c,g],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[m],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"PinCarouselData",kind:"LinkedField",name:"carouselData",plural:!1,selections:[{alias:null,args:null,concreteType:"PinCarouselSlot",kind:"LinkedField",name:"carouselSlots",plural:!0,selections:d,storageKey:null},p],storageKey:null},{alias:null,args:null,concreteType:"ProductMetadataV2",kind:"LinkedField",name:"productPinData",plural:!1,selections:[{alias:null,args:null,concreteType:"ItemMetadata",kind:"LinkedField",name:"items",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"additionalImagesLength",storageKey:null}],storageKey:null},p],storageKey:null},{alias:"imageSpec_orig",args:[{kind:"Literal",name:"spec",value:"orig"}],concreteType:"ImageDetails",kind:"LinkedField",name:"images",plural:!1,selections:d,storageKey:'images(spec:"orig")'},{alias:null,args:null,kind:"ScalarField",name:"shoppingFlags",storageKey:null},{alias:null,args:null,concreteType:"AggregatedPinData",kind:"LinkedField",name:"aggregatedPinData",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"isShopTheLook",storageKey:null},p],storageKey:null},{alias:null,args:null,concreteType:"StoryPinData",kind:"LinkedField",name:"storyPinData",plural:!1,selections:[s,p],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"storyPinDataId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoTitle",storageKey:null},p],storageKey:null}],type:"V3GetPin",abstractKey:null}],storageKey:null}]},params:{id:"c7680559a748fd5ebaa6240c52c3c2526a2e98af3a7ba138ea02b012f2e1e478",metadata:{},name:"CloseupPageDesktopQuery",operationKind:"query",text:null}});y.hash="e7468ff73e618822b529aa9bcbecc941";let k=y;!function(e){if("query"===e.params.operationKind){if(window.__pwsCacheRelayConcreteRequest)window.__pwsCacheRelayConcreteRequest(e);else{let a=[e.params.name,e.params.id].join(":");window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__=window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__||{},window.__PWS_RELAY_CONCRETE_REQUEST_CACHE__[a]=e}}}(y.default||y)},908200:function(e,a,l){l.r(a),l.d(a,{default:()=>i});let n={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupPageDesktop_pin",selections:[{args:null,kind:"FragmentSpread",name:"useGetStringifiedCommerceAuxData_pin"},{alias:null,args:null,kind:"ScalarField",name:"gridTitle",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"gridDescription",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"trackingParams",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isGoLinkless",storageKey:null},{alias:null,args:null,concreteType:"RichPinDataView",kind:"LinkedField",name:"richMetadata",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"title",storageKey:null},{alias:null,args:null,concreteType:"ArticleMetadata",kind:"LinkedField",name:"article",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"seoTitle",storageKey:null},{alias:null,args:null,concreteType:"RichPinGridData",kind:"LinkedField",name:"richSummary",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"displayName",storageKey:null}],storageKey:null}],type:"Pin",abstractKey:null};n.hash="c1042c31d3fb15196a761c3174223961";let i=n},671539:function(e,a,l){l.d(a,{j:()=>c,z:()=>g});var n=l(4533),i=l(343669),t=l(613567),r=l(774838),s=l(34550),d=l(865043),u=l(739405);let o=(e,a,l)=>{let n=(0,i.i7)(l.browserName??""),t=l.browserVersion?parseInt(l.browserVersion.split(".")[0],10):0;return n&&(e&&t>=122&&a("auth_dweb_google_fedcm_onetap_modal").anyEnabled||!e&&"android"===l.platform&&t>=122&&a("auth_mweb_google_fedcm_onetap_modal").anyEnabled)},c=e=>{let a=(0,u.HG)(),{checkExperiment:l}=(0,t.F)(),{userAgent:i}=(0,r.B)();return e.isAuth&&e.socialNetwork&&e.socialNetwork.gplus&&e.socialNetwork.gplus.connected&&!s.ZP.getItem(n.tr)&&o(a,l,i)},g=(e,a)=>{let l="desktop"===a?"dweb":"mweb",n=e.getMomentType();if("dismissed"===n){let a=e.getDismissedReason();(0,d.My)(`${l}.onetap_modal.dismissed.${a}`)}else(0,d.My)(`${l}.onetap_modal.${n}`)}},446473:function(e,a,l){l.d(a,{A:()=>n});let n="socialPinLanding"},550946:function(e,a,l){l.d(a,{Z:()=>r});var n=l(27399),i=l(236269),t=l(271875);function r(){let{conversationCreate:e}=(0,t.Z)();return async a=>{let l;let t=n.Z.create("ConversationsResource",a);try{let a=(await t.callCreate()).resource_response.data;a&&(e(a),l=a)}catch(e){throw Error((0,i.Z)(e,"message"))}return l}}},20717:function(e,a,l){l.d(a,{_l:()=>P,cO:()=>h,t2:()=>S,w2:()=>v,xM:()=>_});var n=l(667294),i=l(616550),t=l(27399),r=l(173874),s=l(575820),d=l(739405),u=l(462867),o=l(785893);let c="UnauthDesktopSocialPinLandingPageContext",g="AthDesktopSocialPinLandingPageContext",m="AuthMobileSocialPinLandingPageContext",p=(0,n.createContext)(),y=({children:e})=>{let[a,l]=(0,n.useState)(!1),[i,t]=(0,n.useState)(!1),r=(0,n.useMemo)(()=>({hasSeenAuthMobileLandingToast:a,setHasSeenAuthMobileLandingToast:l,hasSeenAuthDesktopLandingToast:i,setHasSeenAuthDesktopLandingToast:t}),[a,l,i,t]);return(0,o.jsx)(p.Provider,{value:r,children:e})},k=(0,n.createContext)({key:"",data:null}),_=({children:e})=>{let a=(0,i.TH)(),l=(0,u.Z)(),p=l&&l.isAuth,_=(0,d.HG)(),h=(0,n.useRef)((0,r.fY)(a)&&(0,s.mB)(a.search).invite_code||null),P=(0,i.LX)(a.pathname,{path:"/pin/:id"}),S=String(P&&"id"in P.params&&P.params.id)||"",[v,F]=(0,n.useState)({key:"",data:null});return(0,n.useEffect)(()=>{(async function(){let e=h.current;if(e)try{let a=t.Z.create("InviteCodeMetadataResource",{invite_code:e}),n=(await a.callGet()).resource_response.data;if(n){let e=n.sender??null,a=p&&e.id!==l.id&&e?.should_show_messaging&&l.should_show_messaging;!p&&_?F({key:c,data:{inviter:e,popoverData:e&&![5,9,12,16].includes(n.invite_channel)?{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name}:null}}):a&&!_?F({key:m,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:l.id||""},pin:{pinId:S}}}}):a&&_&&F({key:g,data:{toastData:{inviter:{inviterAvatarUrl:e.image_medium_url||"",inviterName:e.first_name||e.full_name,inviterId:e.id},viewer:{viewerId:l.id||""},pin:{pinId:S}}}})}else F({key:"",data:null})}catch{F({key:"",data:null})}})()},[p,_,l,S]),(0,o.jsx)(y,{children:(0,o.jsx)(k.Provider,{value:v,children:e})})},h=()=>{let e=(0,n.useContext)(k);return e.key===c?e:null},P=()=>{let e=(0,n.useContext)(k);return e.key===m?e:null},S=()=>{let e=(0,n.useContext)(k);return e.key===g?e:null},v=()=>(0,n.useContext)(p)},992071:function(e,a,l){l.d(a,{Z:()=>P});var n=l(616550),i=l(883119),t=l(230201),r=l(236269),s=l(583875),d=l(924591),u=l(138596),o=l(216975),c=l(577356),g=l(739405),m=l(462867),p=l(446473),y=l(550946),k=l(271875),_=l(20717),h=l(785893);function P({hideToast:e,pinAttachment:a}){let l=(0,u.ZP)(),P=(0,n.k6)(),{logContextEvent:S}=(0,t.v)(),{showToast:v}=(0,c.F9)(),F=(0,y.Z)(),K=(0,m.Z)(),{conversationOpen:f,dropdownOpen:L,setObjectAttachment:x}=(0,k.Z)(),T=(0,g.HG)(),w=(0,_.t2)(),A=(0,_._l)(),b=T?w?.data:A?.data,D=b&&"toastData"in b?b.toastData:null,C=T?14344:14343;if(D){let{inviter:n,viewer:t}=D,u=(0,h.jsx)(i.xv,{inline:!0,weight:"bold",children:n.inviterName}),c=(0,h.jsx)(i.xv,{children:(0,o.nk)(l._('Like this Pin? Let {{ inviterName }} know.', 'SocialPinLandingPage.AuthSocialPinLandingPage.toastText', 'text to show info about this invite, inviterName: the name of inviter'),{inviterName:u})}),g=({conversationId:e,pinAttachment:a})=>{T?(L(),f(e)):P.push(`/conversation/${e}`),x(a)},m=async()=>{S({event_type:T?101:102,view_type:3,view_parameter:156,component:C});try{let e=await F({user_ids:[n.inviterId,t.viewerId]});if(e){let l=e.id;g({conversationId:l,pinAttachment:{...a,source:p.A}})}}catch(e){v(({hideToast:a})=>(0,h.jsx)(d.Z,{onHide:a,text:(0,r.Z)(e,"message")??""}))}};return S({event_type:13,view_type:3,view_parameter:156,component:C}),(0,h.jsx)(i.kC,{justifyContent:"center",children:(0,h.jsx)(i.iP,{onTap:()=>{m(),e()},children:(0,h.jsx)(d.Z,{duration:7e3,onHide:e,primaryAction:{accessibilityLabel:l._('Reply', 'SocialPinLandingPage.AuthToast.replyButtonAccessibilityLabel', 'reply back to a Pin shared to the viewer'),label:l._('Reply', 'SocialPinLandingPage.AuthToast.replyButton', 'reply back to a Pin shared to the viewer'),size:"lg",onClick:()=>{}},text:c,thumbnail:{avatar:(0,h.jsx)(s.qE,{color:K.isAuth?K.avatar_color_index:void 0,name:n.inviterName,src:n.inviterAvatarUrl})}})})})}}},793026:function(e,a,l){l.d(a,{Z:()=>R});var n,i,t=l(667294),r=l(167912),s=l(616550),d=l(883119),u=l(451091),o=l(399312),c=l(508202),g=l(59355),m=l(907022),p=l(400962),y=l(671539),k=l(613567),_=l(825605),h=l(577356),P=l(575647),S=l(462867),v=l(68876),F=l(60707),K=l(2061),f=l(250704),L=l(20717),x=l(992071),T=l(228612),w=l(785893);let A=(0,t.lazy)(()=>Promise.all([l.e("40211"),l.e("68209")]).then(l.bind(l,559422))),b=void 0!==n?n:n=l(324510),D=void 0!==i?i:i=l(908200);function C({isEligibleForPdp:e,pinId:a,ratingValue:l,pinKey:n}){let i=(0,p.aX)(),r=(0,s.k6)(),y=(0,s.TH)(),_=(0,S.Z)(),{trafficSource:v}=(0,o.Z)(i,_.isAuth),K=(0,m.Z)(D,n),{checkExperiment:T}=(0,k.F)(),A=K?.gridTitle||K?.gridDescription||K?.richMetadata?.title||K?.richSummary?.displayName||K?.richMetadata?.article?.name,b=T("ff_seo_pin_title_fix").anyEnabled,{showToast:C}=(0,h.F9)(),I=(0,L.t2)(),E=(0,L.w2)();(0,t.useEffect)(()=>{document.title=(!A&&b?K?.seoTitle?.trim():A?.trim())||"Pin page"},[A,b,K?.seoTitle]),(0,t.useEffect)(()=>{if(!E||E.hasSeenAuthDesktopLandingToast)return()=>{};let{setHasSeenAuthDesktopLandingToast:e}=E,l=setTimeout(()=>{if(I){let l={type:"pin",id:a};e(!0),C(({hideToast:e})=>(0,w.jsx)(x.Z,{hideToast:e,pinAttachment:l}))}},3e3);return()=>{clearTimeout(l)}},[I,a,C,E]);let R=(0,P.Z)(K);return((0,g.Q)({view_type:3,object_id_str:a,view_data:{pin_id:a},component:13283,aux_data:{current_page_url:y.pathname+y.search,closeup_navigation_type:(0,F.Z)(r,v),...R(),...l?{rating_value:l}:{},is_go_linkless:!!K?.isGoLinkless},clientTrackingParams:(0,f.Z)((y?.state||{}).trackingParams,K?.trackingParams)},a),e)?(0,w.jsx)(d.xu,{"data-test-id":"pdp-container",children:(0,w.jsx)(c.Z,{})}):(0,w.jsx)(d.xu,{"data-test-id":"closeup-container",children:(0,w.jsx)(u.ZP,{})})}function I({pinId:e}){let a=function({pinId:e}){return{query:b,variables:{pinId:e}}}({pinId:e}),l=(0,r.useLazyLoadQuery)(b,a.variables),n=l.v3GetPinQuery?.data;return(0,w.jsx)(C,{isEligibleForPdp:n?.isEligibleForPdp??!1,pinId:e,pinKey:n,ratingValue:n?.richSummary?.aggregateRating?.ratingValue})}function E({pinId:e}){let a=(0,T.S6)(),l=e?a(e):null;return(0,w.jsx)(C,{isEligibleForPdp:l?.is_eligible_for_pdp??!1,pinId:e,pinKey:null!=l?{type:"deprecated",data:l}:null,ratingValue:l?.rich_summary?.aggregate_rating?.rating_value})}function R(){let{id:e}=(0,s.UO)(),{isGraphQLEnabledInGeneral:a}=(0,K.nF)(),l=(0,S.Z)(),n=(0,y.j)(l);return(0,w.jsxs)(v.Z,{type:"authDesktop",children:[n&&(0,w.jsx)(_.Z,{children:(0,w.jsx)(A,{})}),a?(0,w.jsx)(_.Z,{children:(0,w.jsx)(I,{pinId:e||""})}):(0,w.jsx)(E,{pinId:e||""})]})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/31188-3c72dd9c8c6c9461.mjs.map