"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([["27692"],{691825:function(e,t,n){n.d(t,{Z:()=>k});var i=n(667294),r=n(359496);let o=()=>{let e=(0,r.Z)();return(0,i.useCallback)((t,n)=>e(t,{loggingOptions:n}),[e])};var s=n(124617),a=n(671340),l=n(78521),c=n(774838),u=n(144690),_=n(581722),d=n(462867);let h=()=>{let e=(0,d.Z)(),t=(0,_.v9)(({loggedOutUserInfo:e})=>e?.userInfo);return e.isAuth&&e.isLimitedLogin?{type:"LIMITED_LOGIN",info:{connectedToFacebook:!!((e.socialNetwork||{}).facebook||{}).connected,connectedToGoogle:!!((e.socialNetwork||{}).gplus||{}).connected,email:e.email,firstName:e.firstName,hasPassword:!!e.hasPassword,imageUrl:e.imageMediumUrl,gplusUrl:((e.socialNetwork||{}).gplus||{}).url}}:{type:e.isAuth?"AUTH":"UNAUTH",info:t&&t.email&&t.first_name?{connectedToFacebook:!!t.connected_to_facebook,connectedToGoogle:!!t.connected_to_google,email:t.email,firstName:t.first_name,hasPassword:!!t.has_password,imageUrl:t.medium_image_url??null}:null}};var g=n(36776);let E=()=>{let[e,t]=(0,i.useState)("");return{route:e,setRoute:t}};var p=n(104999),m=n(138596),v=n(739405),f=n(229127),w=n(61046);let x=()=>{let e=(0,m.ZP)(),t=(0,v.HG)(),n=(0,p.Z)(),r=t?(0,f.hr)(e):(0,f.Wh)(e),[o,s]=(0,i.useState)(r);return(0,w.cZ)(e=>s(e??r)),(0,w.NN)(n),{text:o,setText:s}},b=()=>{let[e,t]=(0,i.useState)(!1),n=(0,p.Z)();return(0,w.UE)(()=>t(!0)),(0,w.NN)(n),{visible:e,setVisible:t}};var C=n(785893);function y({children:e}){let t=function(){let e=b();return{loginForMore:e,limitedLoginModalSubheader:x(),limitedLoginModalNextLocation:E(),viewer:h()}}();return(0,C.jsx)(g.o,{value:t,children:e})}function S({children:e}){let t=(0,c.B)(),n=h(),r=o(),l=(0,i.useMemo)(()=>({getDeviceAppTypeString:()=>(0,a.Z)(t),register:r,viewer:n}),[t,n,r]);return(0,C.jsx)(s.I7,{value:l,children:e})}let k=({children:e})=>(0,C.jsx)(u.iE,{children:(0,C.jsx)(y,{children:(0,C.jsx)(S,{children:(0,C.jsx)(l.Z,{children:e})})})})},796757:function(e,t,n){n.d(t,{Z:()=>G});var i=n(667294),r=n(581722),o=n(230201),s=n(27399),a=n(249459);let l=[9,3];var c=n(301538),u=n(71133),_=n(609252),d=n(936367),h=n(970414),g=n(209045),E=n(767415);function p(e,t,n){var i;return(t="symbol"==typeof(i=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=typeof i)return i;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(t,"string"))?i:i+"")in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let m=e=>{let t=!1;return(...n)=>{t||(t=!0,e(...n))}},v=e=>{switch(e.event_type){case 13:return!!e.view_type&&l.includes(e.view_type);case 4703:return 3===e.view_type&&85===e.component;case 82:case 8948:return!0;default:return!1}},f=null,w=(0,c.ZP)();class x{constructor(e){p(this,"_logTimeoutLong",null),p(this,"_logTimeoutShort",null),p(this,"_clickthroughStartEvent",null),p(this,"_utcDate",new Date),p(this,"_collectionClickthroughEndEvent",null),this.rightClickthroughRaceConditionExpEnabled=e.rightClickthroughRaceConditionExpEnabled,this._webFastFlushEventsEnabled=e.webFastFlushEventsEnabled,this.contextLogEstimateFlushExpEnabled=e.contextLogEstimateFlushExpEnabled,this._contextLogSyncExpStatus=e.contextLogSyncExpStatus;let t=e=>{let{activeElement:t}=document;if(t&&t.id===a.ZP.VIDEO_IFRAME_ID&&t){setTimeout(()=>t.blur(),0);return}_.Z.pause(d.LU),this.flushEvents(e)},n=m(()=>t(!0)),i=()=>{_.Z.resume(d.LU)};{w&&w._setContextLogEstimateFlushExp&&w._setContextLogEstimateFlushExp(this.contextLogEstimateFlushExpEnabled),w&&w.initiateIndexDBCache&&w.initiateIndexDBCache(),window.addEventListener("beforeunload",n),window.addEventListener("pagehide",n),window.addEventListener("focus",i),window.addEventListener("blur",()=>t(!1));let{hidden:e,visibilityChange:r}=(0,u.s)();r&&window.addEventListener(r,()=>{document[e]?t(!1):(this.flushEvents(),i())},!1)}}setTimeoutToFlushEvents(e){!this._logTimeoutShort&&(!this._webFastFlushEventsEnabled&&e.view_type&&l.includes(e.view_type)&&13===e.event_type||this._webFastFlushEventsEnabled&&v(e))?this._logTimeoutShort=setTimeout(this.flushEvents.bind(this,!1,!0),300):this._logTimeoutLong||(this._logTimeoutLong=setTimeout(this.flushEvents.bind(this),1e4))}addEvent(e,t){let n=e.event_type;if(null==n||!(0,c.cA)(e))return;this.setTimeoutToFlushEvents(e);let i=(0,c.li)(e,t);i.appState=h.Z.getAppState();let r=c.Ch[n];if(r){if(r.startsWith("storyImpression")){i.event_data?.storyImpressions&&(i.event_data.storyImpression=i.event_data.storyImpressions,delete i.event_data.storyImpressions),w.logImpression((0,c.a)(i,"storyImpression"));return}(0,c.nc)(i,r).forEach(w.logImpression);return}if((0,E.nP)("webapp.contextLogger.impressionType",{sampleRate:.01,tags:{event_type:n}}),w.logContextEvent(i),12===n){w.logContextEvent({...i,event_type:7946}),this._clickthroughStartEvent={...i,time:1e6*Date.now()},f?.storeClickthroughProperties({view_type:i.view_type,view_parameter:i.view_parameter,component:i.component,element:i.element,object_id_str:i.object_id_str,view_data:i.view_data,aux_data:i.aux_data,clientTrackingParams:i.clientTrackingParams});let{aux_data:e}=i||{};this.rightClickthroughRaceConditionExpEnabled&&e&&"rightClick"===e.clickthrough_type&&f?.startOffsiteRightClickTimedPair()}if(7761===n||7762===n){let e=7761===n?7777:7843;this._collectionClickthroughEndEvent={...i,event_type:e}}if(4100===n&&this._collectionClickthroughEndEvent){let e=this._collectionClickthroughEndEvent;this._collectionClickthroughEndEvent=null;let t={...e,object_id_str:i.object_id_str,duration_ns:i.duration_ns};w.logContextEvent(t)}}flushEvents(e){let t=w.getContextEvents?.();t&&t.length&&w.flushContextEvents(e),this._reset()}_reset(){this._resetShortTimerEvents(),this._resetLongTimerEvents()}_resetShortTimerEvents(){w.resetEventsBuffer?.(),clearTimeout(this._logTimeoutShort),this._logTimeoutShort=null}_resetLongTimerEvents(){w.resetEventsBuffer?.(),clearTimeout(this._logTimeoutLong),this._logTimeoutLong=null}}var b=n(521367),C=n(616550),y=n(433069),S=n(391696),k=n(785893);function T({children:e}){let t=(0,C.TH)(),n=(0,y.b)(),[r,o]=(0,i.useState)(!0),s=(0,i.useCallback)(()=>{if(n&&r){let e=new URLSearchParams(t.search);if(!e.get("url")){o(!1);let t={},n=e.get("tracking_id")||e.get("e_t"),i=e.get("utm_campaign"),r=e.get("utm_source");if(n&&i&&r)return t.message_type=i,t.tracking_id=n,t.utm_source=r,JSON.stringify(t)}}},[r,n,t.search]),a=(0,i.useMemo)(()=>({getLandingContext:s}),[s]);return(0,k.jsx)(S.T,{value:a,children:e})}var I=n(613567),R=n(774838),L=n(647908),Z=n(660322),N=n(761051),P=n(487038),F=n(464180),j=n(893957);function O({children:e}){let t=(0,o.v)(),n=(0,g.w)({contextLogger:t});return(0,j.Z)(()=>{document.hasFocus()&&n.registerApp(),n.addEventListeners()}),(0,k.jsx)(F.$,{value:n,children:e})}var D=n(462867),A=n(801983),U=n(683776),H=n(914253),M=n(228612),B=n(157498);function $({children:e}){let t=(0,B.kW)(),n=Object.keys(t).find(e=>void 0!==t[e].login_state),r=n?t[n]:void 0,o=(0,i.useMemo)(()=>(0,A.Z)(r),[r]),s=(0,R.gf)(),{isAuth:a}=o,{isAuthenticated:l}=(0,R.B)();return(0,i.useEffect)(()=>{l!==a&&s({isAuthenticated:a})},[l,a]),(0,k.jsx)(D.$,{value:o,children:e})}function W({children:e}){let t=(0,I.F)(),n=(0,M.AF)(),r=(0,i.useRef)(e=>n[e]);(0,i.useEffect)(()=>{r.current=e=>n[e]},[n]);let a=(0,i.useMemo)(()=>(function({getReduxPin:e,rightClickthroughRaceConditionExpEnabledExpEnabled:t=!1,contextLogEstimateFlushExpEnabled:n=!1,webFastFlushEventsEnabled:i=!1,contextLogSyncExpStatus:r=!1,webDeliverabilityAppTimedPairEnabled:o=!1}){let a=new x({rightClickthroughRaceConditionExpEnabled:t,contextLogEstimateFlushExpEnabled:n,webFastFlushEventsEnabled:i,contextLogSyncExpStatus:r});window.addEventListener&&window.addEventListener("focus",()=>{if(a._clickthroughStartEvent){let e=a._clickthroughStartEvent;a._clickthroughStartEvent=null;let t={...e,event_type:4100,duration_ns:(0,u.Z)()-e.time};a.addEvent(t)}}),w._getIndexDBInstance?.()&&w.syncCachedEndEvents?.();let l=t=>{try{let n=t?e(t):void 0;return n?`${n.tracking_params??""}~0`:void 0}catch{return}},c={flushContextEvents:e=>a.flushEvents(e),logContextEvent:e=>{if(null===e.event_type||void 0===e.event_type)return;let t=e.clientTrackingParams||l(e.object_id_str);a.addEvent({...e,clientTrackingParams:t},c.injectSetViewContextDataFromHook)},logImpression:({auxData:e,component:t,eventData:n,eventType:i,impressionType:r,objectIdStr:o,viewData:s,viewParameter:l,viewType:u,element:_})=>{null!=i&&a.addEvent({event_type:i,event_data:{[r]:n},component:t,object_id_str:o,aux_data:e,view_type:u,view_parameter:l,view_data:s,element:_},c.injectSetViewContextDataFromHook)}};return f=(0,g.w)({contextLogger:c,webDeliverabilityAppTimedPairEnabled:o}),s.Z.contextLogger=c,c})({getReduxPin:e=>r.current(e),rightClickthroughRaceConditionExpEnabledExpEnabled:t.checkExperiment("web_metrics_fix_right_click_clickthrough_race_condition").anyEnabled,contextLogEstimateFlushExpEnabled:t.checkExperiment("web_metric_context_log_estimate_flush").anyEnabled,webFastFlushEventsEnabled:t.checkExperiment("web_fast_flush_events").anyEnabled,contextLogSyncExpStatus:t.checkExperiment("web_context_log_sync").anyEnabled,webDeliverabilityAppTimedPairEnabled:t.checkExperiment("web_deliverability_app_timed_pair").anyEnabled}),[t]);return(0,k.jsx)(o.B,{value:a,children:e})}function G(e){let{children:t,reduxStore:n,serverState:o,...a}=e,l=(0,i.useRef)(!1),c=(0,i.useMemo)(()=>new P.ZP,[]);return l.current||(function(e,t){if(!window)return;let n={},i=(e,i)=>{let r=decodeURIComponent(i),o=new Promise(t=>{n[e]||(n[e]={}),n[e][r]=t});t.add(e,r,o)},r=t=>{let{normalizedResponse:i,options:r,resource:o,response:a,schema:l}=(0,N.Z)(t);a.resource_response.error?408!==a.resource_response.error.http_status&&e.dispatch((0,Z.Tl)(o,r,a.resource_response.error)):(s.Z.fetchCompleteCallback&&s.Z.fetchCompleteCallback({resource:o,options:r,response:a,normalizedResponse:i,refresh:!1,resourceSchema:l}),e.dispatch((0,Z.Sr)(o,r,a,i,!1,l))),n[o]?.[L.Z(r)]?.()};window.__PWS_RESOURCE_PENDING_FETCH_HANDLER__=i,window.__PWS_RESOURCE_SSR_HANDLER__=r;let o=Object.keys(window.__PWS_RESOURCE_PENDING_BEFORE_INIT__);o.length&&(o.forEach(e=>{window.__PWS_RESOURCE_PENDING_BEFORE_INIT__[e].forEach(t=>{i(e,t)})}),window.__PWS_RESOURCE_PENDING_BEFORE_INIT__={}),window.__PWS_RESOURCE_DATA_BEFORE_INIT__.length&&(window.__PWS_RESOURCE_DATA_BEFORE_INIT__.forEach(r),window.__PWS_RESOURCE_DATA_BEFORE_INIT__=[])}(n,c),l.current=!0),(0,k.jsx)(U.Z,{...a,children:(0,k.jsx)(P.F_,{value:c,children:(0,k.jsx)(r.zt,{store:n,children:(0,k.jsx)(H.fJ,{children:(0,k.jsx)(M._S,{children:(0,k.jsx)(B.kY,{children:(0,k.jsx)($,{children:(0,k.jsx)(W,{children:(0,k.jsx)(b.FH,{children:(0,k.jsx)(T,{children:(0,k.jsx)(O,{children:t})})})})})})})})})})})}},124617:function(e,t,n){n.d(t,{B$:()=>c,Cw:()=>s,I7:()=>l,c4:()=>a});var i=n(667294),r=n(213491);let o=(0,i.createContext)(null),s=()=>(0,i.useContext)(o),a=o.Provider,{Provider:l,useHook:c}=(0,r.Z)("DesktopCoreLogin")},359496:function(e,t,n){n.d(t,{Z:()=>Z});var i=n(667294),r=n(966502),o=n(27399),s=n(4533),a=n(11442),l=n(104999),c=n(470967),u=n(800213),_=n(228842),d=n(424868),h=n(919492),g=n(552764),E=n(165927),p=n(774838),m=n(959708),v=n(34550),f=n(447926),w=n(865043),x=n(11908),b=n(575820),C=n(629724),y=n(144690),S=n(278277),k=n(378199),T=n(767415);let I=0,R=()=>{let e={};return[s.qo,s.Y9].forEach(t=>{let n=(0,v.M0)().getItem(t);n&&(e[t]=n)}),JSON.stringify(e)},L=()=>{let e=document.referrer;return e?e.indexOf("/t.co/")>-1?"twitter":e.indexOf("google.")>-1?"google":e.indexOf("bing.")>-1?"bing":e.indexOf("facebook.")>-1?"facebook":"other":"direct"};function Z(){let e=(0,g.Z)(),t=(0,l.Z)(),n=(0,p.B)(),Z=(0,x.Z)(),{isRequirementEnabled:N}=(0,y.yp)();return(0,i.useCallback)((i,{loggingOptions:{signupContext:l,signupAttemptContextEvent:g}})=>{let p=e=>{t({...g,event_type:e,aux_data:{...g.aux_data,upsell_reason:g.aux_data?.upsell_reason||(0,v.M0)().getItem(s.bg)||null,upsell_view_count:(0,v.M0)().getItem(s.w0)||0}}),7487===e&&(0,v.M0)().setItem(s.w0,0)},x=({isRetrying:e})=>{let g={...i},y=(0,k.t_)(),P=(0,S.O)(),F=window?.location?.search??null,j=(0,b.mB)(F).utm_campaign;y&&(g={...g,visited_pages:y}),P&&(g={...g,referrer:P}),j&&(g={...g,utm_campaign:j});let O=(0,v.M0)().getItem(s.e9)||[];if(y)g={...g,visited_pages:y};else if(O){let e=[];for(let t of O)t.is_shared_pin&&e.push({ts:t.ts,path:t.path,first_pin_image_signature:t.image_signature,is_shared:!0});e&&(g={...g,visited_pages:JSON.stringify(e.concat(JSON.parse(y||"[]")))})}let D=(0,_.Z)({isComplianceFeatureRequired:N});D.length>0&&(g={...g,privacy_disclaimer_acknowledge:D}),g={...g,user_behavior_data:R()};let A=(0,h.yV)(g);e||(p(7537),Z({action:"signup",event:"attempt",trigger:l?.trigger,type:A}));let U=()=>{let{country:e,countryFromHostName:i,countryFromIp:o,regionFromIp:_}=n;(0,m.Z)("signup"),c.zN(r.Mq.name),c.zN(r.x2.name),(0,a.Z)(),c.t8(r.Xh,"1"),(0,u.Z)(!0),(0,f.L_)(s._b);let d=l?.container||"container_unknown";(0,w.My)(`signup.container.${d}`);let h=l?.signupSource||"signupSource_unknown";(0,w.My)(`signup.source.${h}`),t({event_type:"home_page"===d?1750:1754}),(0,w.My)(`signup_referrer_module.${String((0,C.Z)().referrer||"unknown")}`),(0,E.ko)({country:e,countryFromHostName:i,countryFromIp:o,regionFromIp:_,deviceType:"Desktop",eventCategory:"NewUsers"}),p(7487),Z({action:"signup",event:"success",referrer:L(),trigger:l?.trigger,type:A})},H=e=>{if(e.api_error_code===d.tz&&((0,w.My)("multi_step_set_age_restrict_cookie"),c.t8(r.It,"1",(0,c.kZ)(r.It))),(!e.api_error_code||[d.dO,d.cZ].includes(e.api_error_code))&&I<3)return(0,w.My)(`unauth_web.signup_retry_error.${String(e.api_error_code)}.${String(l?.container)}`),I+=1,x({isRetrying:!0});throw p(7488),Z({action:"signup",event:"fail",trigger:l?.trigger,type:A}),e};return(0,T.nP)("webapp.debug_signup_type.core_register",{sampleRate:1,tags:{CHECK_TYPE:(0,h.Eh)(g,"CHECK_TYPE")??"none",CHECK_EXISTS:(0,h.Eh)(g,"DEPRECATED_CHECK_EXISTS"),CHECK_TRUTHY:(0,h.Eh)(g,"DEPRECATED_CHECK_TRUTHY")}}),o.Z.create("UserRegisterResource",g).callCreate().then(()=>U(),e=>H(e))};return e(),x({isRetrying:!1})},[e,N,t,n,Z])}},671340:function(e,t,n){n.d(t,{Z:()=>i});function i(e){let t=e.userAgent.isMobile?"mobile":"desktop";return`${t}.${e.country}.${e.userAgent.platform}.${e.userAgent.browserName}`.replace(/ /g,"_")}},228842:function(e,t,n){n.d(t,{Z:()=>i});let i=({isComplianceFeatureRequired:e})=>{let t=[];return e(0)&&t.push("fdbr"),t.join(",")}},391696:function(e,t,n){n.d(t,{T:()=>i,Z:()=>o});let{Provider:i,useHook:r}=(0,n(213491).Z)("NotificationContext"),o=r}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/27692-aec8c03564e6d5d6.mjs.map